<div class="animated fadeIn">







  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          Usuarios Administrativos
        </div>
        <div class="card-body">

          <div class="row">
            <div class="col-sm-6 col-lg-4">
              <div class="card text-white bg-warning">
                <div class="card-body ">
                  <div class="btn-group float-right" dropdown>

                  </div>
                  <div class="text-value">{{records.length}}</div>
                  <div>Total de Usuario</div>
                </div>

              </div>
            </div>
            <!--/.col-->

          </div>



          <div class="card-header">
            <button (click)="openModal(crear,'')" type="button" class="btn btn-success">CREAR USUARIO</button>

          </div>
          <div style="overflow-x:scroll;overflow-y: scroll;">
            <table [dtTrigger]="dtTrigger" class="table table-striped table-bordered table-sm row-border hover"
              datatable [dtOptions]="dtOptions">
              <thead class="thead-light">
                <tr>
                  <th class="text-center"><i class="icon-people"></i></th>
                  <th>Nombres</th>
                  <th>Correo</th>
                  <th>Usuario</th>
                  <th class="text-center">Tipo</th>
                  <th>Accion</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of records; let i = index">
                  <td class="text-center">
                    {{i+1}}
                  </td>
                  <td>
                    <div>{{(item.nombres).toUpperCase()}}</div>
                  </td>
                  <td>
                    <div>{{(item.correo).toUpperCase()}}</div>
                  </td>
                  <td class="text-left">
                    {{item.user.toUpperCase()}}
                  </td>

                  <td class="text-center">
                    <button *ngIf="item.tipo == 0" type="button" class="btn btn-block btn-info">ADMIN</button>
                    <button *ngIf="item.tipo == 1" type="button" class="btn btn-block btn-info">TECNICO</button>
                  </td>
                  <td class="text-center">
                    <div class="btn-group float-center" dropdown>
                      <button type="button" class="btn dropdown-toggle p-0" dropdownToggle>
                        <i class="icon-settings"></i>
                      </button>
                      <div class="dropdown-menu dropdown-menu-right" *dropdownMenu>
                        <a class="dropdown-item" (click)="openModal(reinicar, item.id)">Reinicar Contraseña</a>
                        <a class="dropdown-item" (click)="openModal(modificar, item.id)">Modificar</a>
                        <a class="dropdown-item" (click)="openModal(rechazar, item.id)">Eliminar</a>
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>



        </div>
      </div>
    </div>
    <!--/.col-->
  </div>
  <!--/.row-->


</div>


<ng-template #crear>
  <div class="modal-header" style="background-color:#4dbd74">
    <h5 class="modal-title"> Crear Usuario Web</h5>
    <button type="button" class="close" (click)="decline()" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body text-center">
    <h6>Ingrese los datos del Usuario.</h6>
    <div class="form-group text-left">
      <label for="">Nombre</label>
      <input [(ngModel)]="nombre" name="nombre" class="form-control">
    </div>

    <div class="form-group text-left">
      <label for="">Correo</label>
      <input [(ngModel)]="correo" name="correo" class="form-control">
    </div>

    <div class="form-group text-left">
      <label for="">Tipo</label>

      <select class="form-control" name="tipo" [(ngModel)]="tipo">
        <option value="0">ADMINISTRADOR</option>
        <option value="1">TECNICO</option>
      </select>
    </div>

    <div class="form-group">

      <br>

      <button type="button" class="btn btn-success" (click)="createUser()">Crear</button>
      <button type="button" class="btn btn-default" (click)="decline()">Cancelar</button>
    </div>
  </div>
</ng-template>




<ng-template #modificar>
  <div class="modal-header" style="background-color:#ffc107">
    <h5 class="modal-title"> ¿Eliminar Usuario Web?</h5>
    <button type="button" class="close" (click)="decline()" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body text-center">
    <h6>Modifique los datos del Usuario.</h6>
    <div class="form-group text-left">
      <label for="">Nombre</label>
      <input [(ngModel)]="nombre" name="nombre" class="form-control">
    </div>

    <div class="form-group text-left">
      <label for="">Correo</label>
      <input [(ngModel)]="correo" name="correo" class="form-control">
    </div>

    <div class="form-group text-left">
      <label for="">Tipo</label>

      <select class="form-control" name="tipo" [(ngModel)]="tipo">
        <option value="0">ADMINISTRADOR</option>
        <option value="1">TECNICO</option>
      </select>
    </div>

    <div class="form-group">

      <br>

      <button type="button" class="btn btn-warning" (click)="modifiedUser()">Modificar</button>
      <button type="button" class="btn btn-default" (click)="decline()">Cancelar</button>
    </div>
  </div>
</ng-template>


<ng-template #rechazar>
  <div class="modal-header" style="background-color:#f86c6b">
    <h5 class="modal-title"> ¿Eliminar Usuario Web?</h5>
    <button type="button" class="close" (click)="decline()" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body text-center">
    <h6>¿Estas seguro querer eliminar el usuario?</h6>
    <button type="button" class="btn btn-default" (click)="rechazarUser()">Si</button>
    <button type="button" class="btn btn-danger" (click)="decline()">Cancelar</button>
  </div>
</ng-template>

<ng-template #reinicar>
  <div class="modal-header" style="background-color:#ffc107">
    <h5 class="modal-title"> ¿Reinicio de Contraseña para Usuario Web?</h5>
    <button type="button" class="close" (click)="decline()" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body text-center">
    <h6>¿Estas seguro de querer reinicar la contraseña del usuario?</h6>
    <button type="button" class="btn btn-default" (click)="ReinicarContraUser()">Si</button>
    <button type="button" class="btn btn-danger" (click)="decline()">Cancelar</button>
  </div>
</ng-template>